<div class="container px-5 px-sm-0">
	<div id="error_explanation">
		<%= render 'layouts/errors', book: @book %>
  </div>
	<div class="row">
		<div class="col-md-3">
			<h2>User info</h2>
			<%= attachment_image_tag @user, :profile_image, size: "100x100", format: 'jpeg', class:"attachment user profile_image fallback", fallback: "no_image.jpg" %>
			<table class="table">
				<tbody>
					<tr></tr>
					<tr>
						<th>name</th>
						<th><%= @user.name %></th>
					</tr>
					<tr>
						<th>introduction</th>
						<th><%= @user.introduction %></th>
					</tr>
					<tr>
						<th>follows</th>
						<th>
							<%= link_to @user.following.count, following_user_path(@user.id) %>
						</th>
					</tr>
					<tr>
						<th>followers</th>
						<th><%= link_to @user.followers.count, followers_user_path(@user.id) %></th>
					</tr>
				</tbody>
			</table>

			<div class="row">
			<% if @user.id == current_user.id %>
				<%= link_to edit_user_path(current_user.id), class:"btn btn-outline-secondary btn-block" do %>
				<i class="fas fa-user-cog"></i>
				<% end %>
			<% else %>
				<% unless current_user == @user %>
								<% if current_user.following?(@user) %>
									<%= form_for(current_user.active_relationships.find_by(followed_id: @user.id),
        							html: { method: :delete }) do |f| %>
									<%= f.submit "フォロー外す", class: "btn btn-primary" %>
									<% end %>
								<% else %>
									<%= form_for(current_user.active_relationships.build) do |f| %>
									<div><%= hidden_field_tag :followed_id, @user.id %></div>
								 	<%= f.submit "フォローする", class: "btn btn-success" %>
									<% end %>
								<% end %>
							<% end %>
			<% end %>

			</div>
			<h2 class="mt-3">New book</h2>
			<%= render 'books/form', book: @book %>
		</div>

		<div class="col-md-8 offset-md-1">
			<h2>Books</h2>
			<%= render 'books/index', books: @books %>
		</div>
	</div>